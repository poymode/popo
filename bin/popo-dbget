#!/usr/bin/env ruby

REQUIRED_VERSION = ">=0.2.3"

begin
  Gem::Specification.find_by_name('dbget_client', REQUIRED_VERSION)
  require 'dbget_client'
rescue Gem::LoadError
  p "Missing required gem. Install dbget_client #{REQUIRED_VERSION}"
  exit 1
end

p "A CABLING_TARGET is not defined!" and exit unless ENV.include?('CABLING_TARGET')

DbgetClient::Runner.new({:suffix => ENV['CABLING_TARGET']}).run!(ARGV, 'mysql')
